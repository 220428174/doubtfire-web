<div class="panel-heading">
  <h4 class="panel-title">
    Groups in
    <strong ng-hide="showGroupSetSelector">
      {{selectedGroupSet.name}}
    </strong>
    <group-set-selector
      style="max-width: 50%; padding-left: 1ex; display: inline-block;"
      ng-show="showGroupSetSelector"
      unit="unit"
      ng-model="selectedGroupSet"
      on-change="selectGroupSet">
    </group-set-selector>
  </h4>
</div><!--/panel-heading-->
<div class="panel-body">
  <div class="clearfix">
    <div class="input-group col-sm-6 pull-left">
      <div class="btn-group">
        <label class="btn btn-default col-sm-6" ng-model="staffFilter" btn-radio="'all'">
          <i class="fa fa-university"></i> All Tutorials
        </label>
        <label class="btn btn-default col-sm-6" ng-model="staffFilter" btn-radio="'mine'">
          <i class="fa fa-pencil"></i> My Tutorials
        </label>
      </div>
    </div><!--/staff-filter-button-group-->
    <form class="input-group col-sm-6 pull-right" ng-if="canCreateGroups" ng-submit="addGroup(newGroupName)">
      <input class="form-control" placeholder="{{newGroupNamePlaceholder}}" ng-model="newGroupName">
      <span class="input-group-btn">
        <button type="submit" class="btn btn-success">
          <i class="fa fa-plus"></i> Create Group
        </button>
      </span>
    </form><!--/group-name-create-->
  </div>
  <div class="callout callout-primary row" ng-hide="filteredGroups.length > 0">
    <h4>No Groups To Show</h4>
    <p>
      The {{selectedGroupSet.name}} group set has no groups{{staffFilter == 'mine' || selectedGroupSet.keep_groups_in_same_class ? " in this tutorial." : "."}}
    </p>
  </div>
</div>
<table ng-show="filteredGroups.length > 0" class="table table-condensed table-hover table-pointer">
  <thead>
    <tr>
      <th>
        <a href="" ng-click="groupSortOrder='name'; groupReverse=!groupReverse">
          Group Name <i ng-show="groupSortOrder == 'name'" class="fa fa-caret-{{groupReverse ? 'up' : 'down'}}"></i>
        </a>
      </th>
      <th>
        <a href="" ng-click="groupSortOrder='tutorial_id'; groupReverse=!groupReverse">
          Tutorial <i ng-show="groupSortOrder == 'tutorial_id'" class="fa fa-caret-{{groupReverse ? 'up' : 'down'}}"></i>
        </a>
      </th>
      <th ng-show="unitRole">Actions</th>
    </tr>
  </thead>
  <tbody>
    <tr
      ng-class="{info: group == selectedGroup}"
      ng-click="selectGroup(group)"
      ng-repeat="group in
        filteredGroups = (selectedGroupSet.groups | groupFilter:project:unitRole:staffFilter) |
        orderBy:groupSortOrder:groupReverse |
        startFrom:(pagination.currentPage - 1) * pagination.pageSize |
        limitTo: pagination.pageSize">
      <td class="group-name">
        <span editable-text="group.name" e-name="name" e-form="groupRowform" e-required>
          {{ group.name || 'Not Set' }}
        </span>
      </td>
      <td class="tutorial-id">
        <span editable-select="group.tutorial_id" e-name="tutorial_id" e-form="groupRowform" e-ng-options="t.id as (t.abbreviation + ' - ' + t.description) for t in unit.tutorials">
          <span tooltip="{{group.tutorial().description}}" tooltip-popover-delay="200" tooltip-append-to-body="true">
            {{group.tutorial().abbreviation}}
          </span>
        </span>
      </td>
      <td class="actions" ng-show="unitRole">
        <form editable-form name="groupRowform" onbeforesave="saveGroup($data, group.id)" ng-show="groupRowform.$visible" class="form-buttons form-inline" shown="inserted == group">
          <button type="submit" ng-disabled="groupRowform.$waiting" class="btn btn-primary">
            <i class="fa fa-floppy-o"></i>
          </button>
          <button type="button" ng-disabled="groupRowform.$waiting" ng-click="groupRowform.$cancel()" class="btn btn-default">
            <i class="fa fa-times"></i>
          </button>
        </form>
        <div ng-hide="groupRowform.$visible">
          <button ng-click="groupRowform.$show()" class="btn btn-primary">
            <i class="fa fa-pencil"></i>
          </button>
          <button ng-click="removeGroup(group)" class="btn btn-danger">
            <i class="fa fa-trash-o"></i>
          </button>
        </div><!--/actions-->
      </td>
    </tr>
  </tbody>
</table>
<div class="panel-footer text-center" ng-show="filteredGroups.length > pagination.pageSize">
  <pagination
    total-items="filteredGroups.length"
    ng-model="pagination.currentPage"
    items-per-page="pagination.pageSize"
    max-size="pagination.maxSize"
    class="pagination-sm"
    boundary-links="true"
    rotate="false">
  </pagination>
</div>
</div>
