<div class="upload-submission-modal">
  <div class="modal-header">
    <h3>Submit
      <strong>{{task.definition.abbreviation}}</strong> as
      <select class="form-control input-lg submission-type" ng-if="!uploader.isUploading" ng-change="onSelectNewSubmissionType(submissionType)"
        ng-model="submissionType" ng-options="id as label for (id, label) in submissionTypes">
      </select>
      <span ng-show="uploader.isUploading">
        {{submissionTypes[submissionType]}}
      </span>
    </h3>
  </div>
  <!--/modal-header-->
  <div class="modal-body">
    <div class="state state-group" ng-class="{'state-hidden-left': isHidden('group').left,
                 'state-hidden-right': isHidden('group').right}">
      <div class="card card-default">
        <div class="card-heading">
          <h4>
            Team Contribution
          </h4>
          <p>
            Please rate each team member's effort on working on {{task.definition.name}} by clicking on a
            <i class="fa fa-child"></i> icon that represents their assigned effort.
          </p>
          <p class="text-muted">
            To mark a team member as contributing
            <strong> no effort </strong> click on a
            <i class="fa fa-child"></i> icon twice.
          </p>
        </div>
        <!--/card-heading-->
        <group-member-contribution-assigner task="task" class="card-body" project="task.project()" team="team">
        </group-member-contribution-assigner>
        <!--/group-member-contribution-->
      </div>
      <!--/card-group-->
    </div>
    <!--/state-group-->
    <div class="state state-files" ng-class="{'state-hidden-left': isHidden('files').left,
                 'state-hidden-right': isHidden('files').right,
                 'state-files-uploading': uploader.isUploading}">
      <div ng-class="{'card card-default': !uploader.isUploading}">
        <div class="card-heading" ng-hide="uploader.isUploading">
          <h4>
            Select {{submissionType == 'need_help' ? 'files' : 'evidence'}} to upload
          </h4>
          <span ng-hide="submissionType == 'need_help'">
            Select files from your device that show evidence of your work until no more required files are pending.
          </span>
          <span ng-show="submissionType == 'need_help'">
            Select files from your device that you need help with. You will need to upload all required files for this submission to
            get help on this task but it does not matter if they are not finished.
          </span>
        </div>
        <div class="card-body">
          <file-uploader files="uploader.files" url="uploader.url" payload="uploader.payload" single-drop-zone="true" show-upload-button="false"
            reset-after-upload="false" is-ready="uploader.isReady" is-uploading="uploader.isUploading" initiate-upload="uploader.start"
            on-click-failure-cancel="uploader.onFailureCancel" on-before-upload="uploader.onBeforeUpload" on-success="uploader.onSuccess"
            on-complete="uploader.onComplete"></file-uploader>
        </div>
      </div>
    </div>
    <!--/state-files-->
    <div class="state state-alignment" ng-class="{'state-hidden-left': isHidden('alignment').left,
                 'state-hidden-right': isHidden('alignment').right}">
      <div class="card card-default">
        <div class="card-heading">
          <h4>
            Learning Outcome Alignment
          </h4>
          <p>
            Please rate the relevancy of this task to the specific learning outcome. You
            <strong>must</strong> relate this task to at least one outcome.
          </p>
          <p class="text-muted">
            If you think the task is not related to a specific outcome, click the highest filled circle to remove its relevancy.
          </p>
        </div>
        <!--/card-heading-->
        <div class="list-group">
          <div class="list-group-item clearfix" ng-repeat="ilo in ilos | orderBy: 'ilo_number'">
            <div class="col-sm-12 col-md-7 pointer" ng-click="ilo.collapsed = !ilo.collapsed">
              <h4>
                <strong>{{ilo.abbreviation}}</strong>
                <small>{{ilo.name}}</small>
              </h4>
              <div>Staff believe that {{ilo.staffAlignment.label | lcfirst}}. Click to expand.</div>
              <div class="panel panel-default" collapse="!ilo.collapsed">
                <div class="panel-body">
                  <p>
                    <h5>Outcome Description</h5>
                    <div class="markdown-to-html" ng-bind-html="ilo.description | markdown"></div>
                  </p>
                  <p ng-show="ilo.staffAlignment.rating > 0">
                    <h5>Rationale</h5>
                    <div class="markdown-to-html" ng-bind-html="ilo.staffAlignment.rationale | markdown"></div>
                  </p>
                </div>
              </div>
            </div>
            <!--/ilo-description-->
            <div class="col-sm-12 col-md-5">
              <task-ilo-alignment-rater readonly="false" unit="task.unit()" show-zero-rating="true" ng-model="alignments[ilo.id]">
              </task-ilo-alignment-rater>
            </div>
            <!--/alignment-rater-->
          </div>
        </div>
        <!--/alignment-list-group-->
        <div class="card-footer">
          <p>
            Jusitfy your relevancy alignments with a comment to explain your choices.
          </p>
          <textarea ng-model="alignmentsRationale" class="form-control input-lg" rows="3" placeholder="My rationale is...">
          </textarea>
        </div>
        <!--/comments-for-alignment-->
      </div>
      <!--/card-alignment-->
    </div>
    <!--/state-alignment-->
    <div class="state state-comments" ng-class="{'state-hidden-left': isHidden('comments').left,
                 'state-hidden-right': isHidden('comments').right}">
      <div class="card card-default">
        <div class="card-heading">
          <h4 ng-show="submissionType == 'need_help'">
            What do you need help with?
          </h4>
          <h4 ng-hide="submissionType == 'need_help'">
            Final comments
          </h4>
          <span ng-show="submissionType == 'need_help'">
            Supply a comment on what you would like help on for this task so your tutor can assist you.
          </span>
          <span ng-hide="submissionType == 'need_help'">
            Supply an
            <strong>optional</strong> comment about this submission for your tutor to read as they assess.
          </span>
        </div>
        <!--/card-heading-->
        <div class="card-body">
          <textarea ng-model="comment" class="form-control input-lg" rows="3" placeholder="{{submissionType == 'need_help' ? 'I need help with...' : 'Make a comment...'}}">
          </textarea>
        </div>
      </div>
      <!--/card-comments-->
    </div>
    <!--/state-comments-->
    <div class="state state-policy" ng-class="{'state-hidden-left': isHidden('policy').left, 'state-hidden-right': isHidden('policy').right}">
      <div id="policyText">
        <h3>Declaration</h3>
        <p>By clicking on the Upload button, I certify that the attached work is entirely my own (or where submitted to meet
          the requirements of an approved group assignment is the work of the group), except where work quoted or paraphrased
          is acknowledged in the text. I also certify that it has not been previously submitted for assessment in this or
          any other unit or course unless permission for this has been granted by the Unit Chair of this unit. I agree that
          Deakin University may make and retain copies of this work for the purposes of marking and review, and may submit
          this work to an external plagiarism and collusion detection service who may retain a copy for future plagiarism
          and collusion detection but will not release it or use it for any other purpose.</p>

        <div collapse="plagiarismCollapse">
          <h3>Plagiarism and collusion</h3>
          <p>Plagiarism and collusion constitute extremely serious academic misconduct. They are forms of cheating, and severe
            penalties are associated with them, including cancellation of marks for a specific assignment, for a specific
            unit or even exclusion from the course. If you are ever in doubt about how to cite a reference properly, consult
            your lecturer or the Study Support website Plagiarism occurs when a student passes off as the studentâ€™s own work,
            or copies without acknowledgement as to its authorship, the work of any other person. Collusion occurs when a
            student obtains the agreement of another person for a fraudulent purpose, with the intent of obtaining an advantage
            in submitting an assignment or other work. Work submitted may be reproduced and/or communicated by the university
            for the purpose of detecting plagiarism and collusion. Students are reminded that assessment work, or parts of
            assessment work, cannot be re-submitted for a different assessment task in the same unit or any other unit, without
            the approval of the Unit Chair of this unit. This includes work submitted for assessment at another academic
            institution. If students wish to reuse or extend parts of previously submitted work then they should discuss
            this with the Unit Chair prior to the submission date. Depending on the nature of the task, the Unit Chair may
            permit or decline the request.</p>
        </div>
        <a ng-click="plagiarismCollapse = !plagiarismCollapse">{{plagiarismCollapse && 'What is plagiarism?' || 'Read Less'}}</a>
      </div>
    </div>
  </div>
  <!--/modal-body-->
  <div class="modal-footer" ng-hide="uploader.isUploading">
    <button class="btn btn-danger pull-left" ng-click="$dismiss()" ng-disabled="shouldDisableBtn.cancel()" ng-show="shouldShowBtn.cancel()">
      <i class="fa fa-times"></i> Cancel Submission
    </button>
    <!--/cancel-button-->
    <button class="btn btn-default" ng-click="goToState.previous()" ng-disabled="shouldDisableBtn.back()" ng-show="shouldShowBtn.back()">
      <i class="fa fa-arrow-left"></i> Back
    </button>
    <!--/back-button-->
    <button class="btn btn-default" ng-click="goToState.next()" ng-disabled="shouldDisableBtn.next()" ng-show="shouldShowBtn.next()">
      Next
      <i class="fa fa-arrow-right"></i>
    </button>
    <!--/next-button-->
    <button class="btn btn-success" ng-click="uploadButtonClicked()" ng-disabled="shouldDisableBtn.submit()" ng-show="shouldShowBtn.submit()">
      <i class="fa fa-upload"></i> Upload Submission
    </button>
    <!--/upload-button-->
  </div>
  <!--/modal-footer-->
</div>